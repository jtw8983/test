import json
import os

FILE_PATH = "./data/storage.json"

def empty():
  print("함수 정의가 되어 있지 않습니다.")

def getData():
  if not os.path.exists(FILE_PATH):
    result = { "t1_storage": [] }
    f = open(FILE_PATH, "w", encoding="utf-8")
    json.dump(result, f, ensure_ascii=False)
    f.close()
  else :
    f = open(FILE_PATH, "r", encoding="utf-8")
    result = json.load(f)
    f.close()
  return result

def setData(data):
  if not os.path.exists(FILE_PATH):
    pass
  else :  
    f = open(FILE_PATH, "w", encoding="utf-8")
    json.dump(data, f, ensure_ascii=False)
    f.close()
  list(None)

# 시작
def list(arg):
	data = getData()
	if len(data["t1_storage"]) > 0:
		line1 = "="*50
		line2 = "-"*50
		print(line1)
		print(f"번호\t내용")
		for i in range(len(data["t1_storage"])):
			if i < len(data["t1_storage"]) : print(line2)
			print(f"{data["t1_storage"][i]["id"]}\t{data["t1_storage"][i]["word"]}")
		print(line1)
	else:
		print("데이터가 없습니다.")


def insert(arg):
	data = getData()
	id= (max((row["id"] for row in data["t1_storage"]), default = 0)+1)
	row={"id":id, "word": arg.txt}
	data["t1_storage"].append(row)
	setData(data)

def update(arg):
	data = getData()
	for i in range(len(data["t1_storage"])):
		if data["t1_storage"][i]["id"] == int(arg.no):
			data["t1_storage"][i]["word"] = arg.txt
			break
	setData(data)

def remove(arg):
	data = getData()
	for i in range(len(data["t1_storage"])):
		if data["t1_storage"][i]["id"] == int(arg.no):
			del data["t1_storage"][i]
			break
	setData(data)
 